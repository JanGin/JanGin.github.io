<!DOCTYPE html>
<html lang="zh-CN">

<!-- Head tag -->
<head>

    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>

    <!--Description-->

    

    
        <meta name="description" content="JanGin的个人博客"/>
    

    <!--Author-->
    
        <meta name="author" content="JanGin"/>
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="搭建一个Spring Boot脚手架工程"/>
    

    <!--Open Graph Description-->
    
        <meta property="og:description" content="JanGin的个人博客"/>
    

    <!--Open Graph Site Name-->
        <meta property="og:site_name" content="JanGin&#39;s BLOG"/>

    <!--Type page-->
    
        <meta property="og:type" content="article"/>
    

    <!--Page Cover-->
    
    
        <meta property="og:image" content="http://jangin.github.io/img/home-bg.jpg"/>
    

        <meta name="twitter:card" content="summary_large_image"/>

    

    
        <meta name="twitter:image" content="http://jangin.github.io/img/home-bg.jpg"/>
    

    <!-- Title -->
    
    <title>搭建一个Spring Boot脚手架工程 - JanGin&#39;s BLOG</title>

    <!-- Bootstrap Core CSS -->
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet"/>

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/style.css">


    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
    <link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css"/>
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css"/>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet"/>

    <!-- Google Analytics -->
    


    <!-- favicon -->
    
    <link rel="icon" href="/img/favicon.ico"/>
    

<meta name="generator" content="Hexo 4.2.0"></head>


<body>

    <!-- Menu -->
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">JanGin's BLOG</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                
                    <li>
                        <a href="/">
                            
                                主页
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/archives">
                            
                                归档
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/tags">
                            
                                标签
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/categories">
                            
                                分类
                            
                        </a>
                    </li>
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>

    <!-- Main Content -->
    <!-- Page Header -->
<!-- Set your background image for this header in your post front-matter: cover -->

<header class="intro-header" style="background-image: url('/img/home-bg.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>搭建一个Spring Boot脚手架工程</h1>
                    
                    <span class="meta">
                        <!-- Date and Author -->
                        
                        
                            2020-01-14
                        
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Tags and categories -->
           
                <div class="col-lg-4 col-lg-offset-2 col-md-5 col-md-offset-1 post-tags">
                    
                        


<a href="/tags/Spring-Boot/">#Spring Boot</a>


                    
                </div>
                <div class="col-lg-4 col-md-5 post-categories">
                    
                </div>
            

            <!-- Gallery -->
            

            <!-- Post Main Content -->
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <!-- toc -->
                
    <div id="toc">
        <strong class="sidebar-title">目录</strong>
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#搭建一个Spring-Boot脚手架工程"><span class="toc-text">搭建一个Spring Boot脚手架工程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-创建工程"><span class="toc-text">1.创建工程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-集成Web框架"><span class="toc-text">2.集成Web框架</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-新增配置"><span class="toc-text">2.1 新增配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-编写测试代码"><span class="toc-text">2.2 编写测试代码</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-集成Mybatis框架"><span class="toc-text">3.集成Mybatis框架</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-添加依赖"><span class="toc-text">3.1 添加依赖</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-修改配置"><span class="toc-text">3.2 修改配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-编写用例"><span class="toc-text">3.3 编写用例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-集成Redis"><span class="toc-text">4. 集成Redis</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-引入spring-boot-data-redis依赖"><span class="toc-text">4.1 引入spring-boot-data-redis依赖</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-新增配置"><span class="toc-text">4.2 新增配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-编写测试用例"><span class="toc-text">4.3 编写测试用例</span></a></li></ol></li></ol></li></ol></li></ol>
    </div>

                <h1 id="搭建一个Spring-Boot脚手架工程"><a href="#搭建一个Spring-Boot脚手架工程" class="headerlink" title="搭建一个Spring Boot脚手架工程"></a>搭建一个Spring Boot脚手架工程</h1><h3 id="1-创建工程"><a href="#1-创建工程" class="headerlink" title="1.创建工程"></a>1.创建工程</h3><p>Spring Boot基础工程可由<a href="https://start.spring.io/" target="_blank" rel="noopener">Spring Initializer</a>构建生成.<br><img src="https://raw.githubusercontent.com/JanGin/oschina_myblog_pic/master/blog_pic/RI_X%25LWF_%7DX_471I_%5D2_CBY.png" alt="image"><br><img src="https://raw.githubusercontent.com/JanGin/oschina_myblog_pic/master/blog_pic/jietu_20200130171406.png" alt="image"></p>
<p>填写好Project的一些基本信息，外加一些必要的依赖，直接Generate即可. 这里创建的是一个Spring Web工程.<br>当然，这一步也可以直接在IDE(ItelliJ IDEA 或者Eclipse)中直接操作，可省去后续导入工程到workspace这一步.</p>
<h3 id="2-集成Web框架"><a href="#2-集成Web框架" class="headerlink" title="2.集成Web框架"></a>2.集成Web框架</h3><p>将项目导入到IDE之后，编写一点代码测试运行是否正常.</p>
<h4 id="2-1-新增配置"><a href="#2-1-新增配置" class="headerlink" title="2.1 新增配置"></a>2.1 新增配置</h4><p>编辑applicaiton.properties文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#指定内置服务器端口</span><br><span class="line">server.port&#x3D;8080</span><br><span class="line">spring.thymeleaf.prefix&#x3D;classpath:&#x2F;templates&#x2F;</span><br><span class="line">spring.thymeleaf.suffix&#x3D;.html</span><br></pre></td></tr></table></figure>
<h4 id="2-2-编写测试代码"><a href="#2-2-编写测试代码" class="headerlink" title="2.2 编写测试代码"></a>2.2 编写测试代码</h4><p>再新增两个Controller测试类，分别测试跳转页面和返回字符串两种情况.代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import org.springframework.stereotype.Controller;</span><br><span class="line">import org.springframework.ui.Model;</span><br><span class="line">import org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line">@Controller</span><br><span class="line">@RequestMapping(&quot;&#x2F;hello&quot;)</span><br><span class="line">public class HelloController &#123;</span><br><span class="line"></span><br><span class="line">    @RequestMapping(&quot;&#x2F;test&quot;)</span><br><span class="line">    public String test(Model model) &#123;</span><br><span class="line">        model.addAttribute(&quot;kobe&quot;, &quot;Kobe Bryant&quot;);</span><br><span class="line">        return &quot;hello&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>返回一个名为hello的模板视图.<br>在resources目录下创建一个templates目录用来存放所有的html文件.<br>并新建一个hello.html，内容如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot; xmlns:th&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;1999&#x2F;html&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;See you Kobe&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h1&gt;Mamba Out&lt;&#x2F;h1&gt;</span><br><span class="line">    &lt;h1 th:text&#x3D;&quot;$&#123;kobe&#125;&quot;&gt;&lt;&#x2F;h1&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
<p>保存并运行，访问localhost:8080/hello/test</p>
<p><img src="https://raw.githubusercontent.com/JanGin/oschina_myblog_pic/master/blog_pic/jietu_20200130175916.png" alt="image"></p>
<p>再编写一个测试直接返回字符串，代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line">@RestController</span><br><span class="line">@RequestMapping(&quot;&#x2F;demo&quot;)</span><br><span class="line">public class DemoController &#123;</span><br><span class="line"></span><br><span class="line">    @RequestMapping(&quot;&#x2F;test&quot;)</span><br><span class="line">    public String test() &#123;</span><br><span class="line">        return &quot;demo is running&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/JanGin/oschina_myblog_pic/master/blog_pic/jietu_20200130181659.png" alt="image"></p>
<h3 id="3-集成Mybatis框架"><a href="#3-集成Mybatis框架" class="headerlink" title="3.集成Mybatis框架"></a>3.集成Mybatis框架</h3><p>父工程的POM文件中加入mybatis的Spring Boot Starter依赖和Druid数据源，Mysql驱动的Maven坐标：</p>
<h4 id="3-1-添加依赖"><a href="#3-1-添加依赖" class="headerlink" title="3.1 添加依赖"></a>3.1 添加依赖</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.mybatis.spring.boot&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;mybatis-spring-boot-starter&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;2.1.1&lt;&#x2F;version&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br><span class="line"></span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;mysql&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;mysql-connector-java&lt;&#x2F;artifactId&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br><span class="line"></span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.alibaba&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;druid&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.0.5&lt;&#x2F;version&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure>
<h4 id="3-2-修改配置"><a href="#3-2-修改配置" class="headerlink" title="3.2 修改配置"></a>3.2 修改配置</h4><p>application.properties配置文件中，加入关于Mybatis和Druid数据源的相关配置.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"># mybatis</span><br><span class="line">mybatis.type-aliases-package&#x3D;me.chan.domain</span><br><span class="line">mybatis.type-handlers-package&#x3D;me.chan.typehandler</span><br><span class="line">mybatis.configuration.default-fetch-size&#x3D;100</span><br><span class="line">mybatis.configuration.default-statement-timeout&#x3D;3000</span><br><span class="line">mybatis.mapper-locations&#x3D;classpath:&#x2F;mapper&#x2F;**&#x2F;*.xml</span><br><span class="line"></span><br><span class="line"># datasource</span><br><span class="line">spring.datasource.url&#x3D;jdbc:mysql:&#x2F;&#x2F;192.168.1.100:3306&#x2F;flash_sale?useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf-8&amp;allowMultiQueries&#x3D;true&amp;useSSL&#x3D;false</span><br><span class="line">spring.datasource.username&#x3D;root</span><br><span class="line">spring.datasource.password&#x3D;123456</span><br><span class="line">spring.datasource.driver-class-name&#x3D;com.mysql.jdbc.Driver</span><br><span class="line">spring.datasource.type&#x3D;com.alibaba.druid.pool.DruidDataSource</span><br><span class="line">spring.datasource.filters&#x3D;stat</span><br><span class="line">spring.datasource.maxActive&#x3D;1000</span><br><span class="line">spring.datasource.initialSize&#x3D;100</span><br><span class="line">spring.datasource.maxWait&#x3D;60000</span><br><span class="line">spring.datasource.minIdle&#x3D;500</span><br><span class="line">spring.datasource.timeBetweenEvictionRunsMillis&#x3D;60000</span><br><span class="line">spring.datasource.minEvictableIdleTimeMillis&#x3D;300000</span><br><span class="line">spring.datasource.validationQuery&#x3D;select 1</span><br><span class="line">spring.datasource.testWhileIdle&#x3D;true</span><br><span class="line">spring.datasource.testOnBorrow&#x3D;false</span><br><span class="line">spring.datasource.testOnReturn&#x3D;false</span><br><span class="line">spring.datasource.poolPreparedStatements&#x3D;true</span><br><span class="line">spring.datasource.maxOpenPreparedStatements&#x3D;20</span><br></pre></td></tr></table></figure>
<h4 id="3-3-编写用例"><a href="#3-3-编写用例" class="headerlink" title="3.3 编写用例"></a>3.3 编写用例</h4><p>新建一个User表并插入一条数据，写点代码测试框架集成是否能正常运行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">create table user</span><br><span class="line">(</span><br><span class="line">id int not null primary key,</span><br><span class="line">name varchar(20)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">INSERT INTO user (id, name) VALUES (1, &quot;xiaoming&quot;);</span><br></pre></td></tr></table></figure>
<p>UserDao类：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@Mapper</span><br><span class="line">public interface UserDao &#123;</span><br><span class="line"></span><br><span class="line">    @Select(&quot;SELECT * FROM user WHERE id &#x3D; #&#123;id&#125;&quot;)</span><br><span class="line">    User getById(@Param(&quot;id&quot;) Integer id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>UserService的实现类：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@Service(&quot;userService&quot;)</span><br><span class="line">public class UserServiceImpl implements UserService &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    UserDao userDao;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public User getById(Integer id) &#123;</span><br><span class="line">        return userDao.getById(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Controller类：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@GetMapping(&quot;&#x2F;user&#x2F;&#123;id&#125;&quot;)</span><br><span class="line">public Result testQuery(@PathVariable(&quot;id&quot;) Integer id) &#123;</span><br><span class="line">    User user &#x3D; userService.getById(id);</span><br><span class="line">    return Result.success(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>用Postman作为测试工具来发送http请求:<br><img src="https://raw.githubusercontent.com/JanGin/oschina_myblog_pic/master/blog_pic/jietu_20200201151509.png" alt="image"></p>
<p><strong>集成Mybatis工作完成.</strong></p>
<h3 id="4-集成Redis"><a href="#4-集成Redis" class="headerlink" title="4. 集成Redis"></a>4. 集成Redis</h3><p>现代应用中对缓存的使用往往是必不可少的，而Redis又是业界使用最广泛和最成熟的缓存中间件，因此我们也使用Redis. </p>
<h4 id="4-1-引入spring-boot-data-redis依赖"><a href="#4-1-引入spring-boot-data-redis依赖" class="headerlink" title="4.1 引入spring-boot-data-redis依赖"></a>4.1 引入spring-boot-data-redis依赖</h4><p>POM文件中添加：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">          &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;</span><br><span class="line">          &lt;artifactId&gt;spring-boot-starter-data-redis&lt;&#x2F;artifactId&gt;</span><br><span class="line">          &lt;!--Spring Boot 2.0中spring-boot-starter-data-redis默认使用Lettuce方式替代了Jedis</span><br><span class="line">            如使用Jedis需排除lettuce模块</span><br><span class="line">          --&gt;</span><br><span class="line">          &lt;exclusions&gt;</span><br><span class="line">              &lt;exclusion&gt;</span><br><span class="line">                  &lt;groupId&gt;io.lettuce&lt;&#x2F;groupId&gt;</span><br><span class="line">                  &lt;artifactId&gt;lettuce-core&lt;&#x2F;artifactId&gt;</span><br><span class="line">              &lt;&#x2F;exclusion&gt;</span><br><span class="line">          &lt;&#x2F;exclusions&gt;</span><br><span class="line">      &lt;&#x2F;dependency&gt;</span><br><span class="line">      &lt;dependency&gt;</span><br><span class="line">          &lt;groupId&gt;redis.clients&lt;&#x2F;groupId&gt;</span><br><span class="line">          &lt;artifactId&gt;jedis&lt;&#x2F;artifactId&gt;</span><br><span class="line">      &lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure>
<h4 id="4-2-新增配置"><a href="#4-2-新增配置" class="headerlink" title="4.2 新增配置"></a>4.2 新增配置</h4><p>在application.properties文件中新加入以下内容:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">spring.redis.database&#x3D;0</span><br><span class="line">spring.redis.host&#x3D;127.0.0.1</span><br><span class="line">spring.redis.port&#x3D;6379</span><br><span class="line">spring.redis.password&#x3D;</span><br><span class="line">## millisecond</span><br><span class="line">spring.redis.timeout&#x3D;60000</span><br><span class="line">spring.redis.jedis.pool.max-active&#x3D;8</span><br><span class="line">spring.redis.jedis.pool.max-wait&#x3D;3000</span><br><span class="line">spring.redis.jedis.pool.max-idle&#x3D;8</span><br><span class="line">spring.redis.jedis.pool.min-idle&#x3D;0</span><br></pre></td></tr></table></figure>

<h4 id="4-3-编写测试用例"><a href="#4-3-编写测试用例" class="headerlink" title="4.3 编写测试用例"></a>4.3 编写测试用例</h4><p>新建一个RedisConfig类</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">@Configuration</span><br><span class="line">public class RedisConfig &#123;</span><br><span class="line"></span><br><span class="line">    @Bean</span><br><span class="line">    public StringRedisTemplate stringTemplate(RedisConnectionFactory factory) &#123;</span><br><span class="line">        StringRedisTemplate stringRedisTemplate &#x3D; new StringRedisTemplate();</span><br><span class="line">        stringRedisTemplate.setConnectionFactory(factory);</span><br><span class="line">        return stringRedisTemplate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Bean</span><br><span class="line">    public RedisTemplate&lt;String, Object&gt; redisTemplate(RedisConnectionFactory factory) &#123;</span><br><span class="line">        RedisTemplate&lt;String, Object&gt; redisTemplate &#x3D; new RedisTemplate&lt;&gt;();</span><br><span class="line">        redisTemplate.setConnectionFactory(factory);</span><br><span class="line">        redisTemplate.setDefaultSerializer(new StringRedisSerializer());</span><br><span class="line">        redisTemplate.setKeySerializer(new StringRedisSerializer());</span><br><span class="line">        &#x2F;&#x2F; 若使用fastjson进行序列化，需引入fastjson的依赖</span><br><span class="line">        redisTemplate.setValueSerializer(new FastJsonRedisSerializer&lt;&gt;(Object.class));</span><br><span class="line">        redisTemplate.afterPropertiesSet();</span><br><span class="line"></span><br><span class="line">        return redisTemplate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>对Redis的操作以服务接口的方式提供出来，新增一个RedisService类，代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">@Service(&quot;redisService&quot;)</span><br><span class="line">public class RedisServiceImpl implements RedisService &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private RedisTemplate&lt;String, Object&gt; redisTemplate;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void set(String key, Object value, long expirationTime, TimeUnit timeUnit) &#123;</span><br><span class="line">        redisTemplate.opsForValue().set(key, value, expirationTime);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public Object get(String key) &#123;</span><br><span class="line">        return redisTemplate.opsForValue().get(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Controller类中新增两个方法，用于测试对Redis的set和get</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@PostMapping(&quot;&#x2F;redisSet&quot;)</span><br><span class="line">public Result testSet2Redis(@RequestBody User user) &#123;</span><br><span class="line"></span><br><span class="line">    String userJSON &#x3D; JSONObject.toJSONString(user);</span><br><span class="line">    redisService.set(&quot;user&quot;, userJSON, 5, TimeUnit.MINUTES);</span><br><span class="line">    return Result.success();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@GetMapping(&quot;&#x2F;redisGet&quot;)</span><br><span class="line">public Result testGetFromRedis(@RequestParam(&quot;key&quot;) String key) &#123;</span><br><span class="line">    String obj &#x3D; (String)redisService.get(key);</span><br><span class="line">    User data &#x3D; JSONObject.parseObject(obj, User.class);</span><br><span class="line">    return Result.success(data);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>同样的，利用Postman测试<br><img src="https://raw.githubusercontent.com/JanGin/oschina_myblog_pic/master/blog_pic/jietu_20200204001927.png" alt="image"><br><img src="https://raw.githubusercontent.com/JanGin/oschina_myblog_pic/master/blog_pic/jietu_20200204004108.png" alt="image"><br><img src="https://raw.githubusercontent.com/JanGin/oschina_myblog_pic/master/blog_pic/jietu_20200204001838.png" alt="image"></p>


                
            </div>

            <!-- Comments -->
            
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    


                </div>
            
        </div>
    </div>
</article>

    <!-- Footer -->
    <hr />

<!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    

                    

                    

                    

                    

                    
                </ul>
                <p class="copyright text-muted">&copy; 2020 JanGin<br></p>
                <p class="copyright text-muted">Power by <a target="_blank" href="https://hexo.io/">Hexo</a></p>
            </div>
        </div>
    </div>
</footer>


    <!-- After footer scripts -->
    
<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Bootstrap -->
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Disqus Comments -->



</body>

</html>